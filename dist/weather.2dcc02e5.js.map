{"version":3,"sources":["js/weather.js"],"names":["weather","document","querySelector","COORDS","API_KEY","getWeather","lat","lon","fetch","then","response","json","tem","main","temp","place","name","innerText","saveCoords","myCoords","localStorage","setItem","JSON","stringify","handleGeoSucces","position","latitude","coords","longitude","handleGeoError","console","log","askForCoords","navigator","geolocation","getCurrentPosition","loadCoord","loadedCoords","getItem","parseCoords","parse","init"],"mappings":"AAAA,IAAMA,OAAO,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAhB;AAEA,IAAMC,MAAM,GAAG,QAAf;AACA,IAAMC,OAAO,GAAG,kCAAhB,EAEA;;AAEA,SAASC,UAAT,CAAoBC,GAApB,EAAyBC,GAAzB,EAA8B;AAC7BC,EAAAA,KAAK,+DAAwDF,GAAxD,kBAAmEC,GAAnE,oBAAgFH,OAAhF,mBAAL,CACEK,IADF,CACO,UAACC,QAAD;AAAA,WAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,GADP,EAEEF,IAFF,CAEO,UAACE,IAAD,EAAU;AACf,QAAMC,GAAG,GAAGD,IAAI,CAACE,IAAL,CAAUC,IAAtB;AACA,QAAMC,KAAK,GAAGJ,IAAI,CAACK,IAAnB;AACAhB,IAAAA,OAAO,CAACiB,SAAR,aAAuBL,GAAvB,sBAAiCG,KAAjC;AACA,GANF;AAOA;;AAED,SAASG,UAAT,CAAoBC,QAApB,EAA8B;AAC7BC,EAAAA,YAAY,CAACC,OAAb,CAAqBlB,MAArB,EAA6BmB,IAAI,CAACC,SAAL,CAAeJ,QAAf,CAA7B;AACA;;AAED,SAASK,eAAT,CAAyBC,QAAzB,EAAmC;AAClC,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,MAAT,CAAgBD,QAAjC;AACA,MAAME,SAAS,GAAGH,QAAQ,CAACE,MAAT,CAAgBC,SAAlC;AACA,MAAMT,QAAQ,GAAG;AAChBO,IAAAA,QAAQ,EAARA,QADgB;AAEhBE,IAAAA,SAAS,EAATA;AAFgB,GAAjB;AAIAV,EAAAA,UAAU,CAACC,QAAD,CAAV;AACAd,EAAAA,UAAU,CAACqB,QAAD,EAAWE,SAAX,CAAV;AACA;;AAED,SAASC,cAAT,GAA0B;AACzBC,EAAAA,OAAO,CAACC,GAAR,CAAY,0BAAZ;AACA;;AAED,SAASC,YAAT,GAAwB;AACvBC,EAAAA,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyCX,eAAzC,EAA0DK,cAA1D;AACA;;AAED,SAASO,SAAT,GAAqB;AACpB,MAAMC,YAAY,GAAGjB,YAAY,CAACkB,OAAb,CAAqBnC,MAArB,CAArB;;AACA,MAAIkC,YAAY,KAAK,IAArB,EAA2B;AAC1BL,IAAAA,YAAY;AACZ,GAFD,MAEO;AACN,QAAMO,WAAW,GAAGjB,IAAI,CAACkB,KAAL,CAAWH,YAAX,CAApB;AACAhC,IAAAA,UAAU,CAACkC,WAAW,CAACb,QAAb,EAAuBa,WAAW,CAACX,SAAnC,CAAV;AACA;AACD;;AAED,SAASa,IAAT,GAAgB;AACfL,EAAAA,SAAS;AACT;;AACDK,IAAI","file":"weather.2dcc02e5.js","sourceRoot":"..","sourcesContent":["const weather = document.querySelector(\".js_weather\");\r\n\r\nconst COORDS = \"coords\";\r\nconst API_KEY = \"f44797779b7462a164c3e49d062bb7cd\";\r\n\r\n//https://api.openweathermap.org/data/2.5/weather?lat={lat}&lon={lon}&appid={API key}\r\n\r\nfunction getWeather(lat, lon) {\r\n\tfetch(`https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric`)\r\n\t\t.then((response) => response.json())\r\n\t\t.then((json) => {\r\n\t\t\tconst tem = json.main.temp;\r\n\t\t\tconst place = json.name;\r\n\t\t\tweather.innerText = `${tem}â„ƒ @ ${place}`;\r\n\t\t});\r\n}\r\n\r\nfunction saveCoords(myCoords) {\r\n\tlocalStorage.setItem(COORDS, JSON.stringify(myCoords));\r\n}\r\n\r\nfunction handleGeoSucces(position) {\r\n\tconst latitude = position.coords.latitude;\r\n\tconst longitude = position.coords.longitude;\r\n\tconst myCoords = {\r\n\t\tlatitude,\r\n\t\tlongitude,\r\n\t};\r\n\tsaveCoords(myCoords);\r\n\tgetWeather(latitude, longitude);\r\n}\r\n\r\nfunction handleGeoError() {\r\n\tconsole.log(\"Can't access geolocation\");\r\n}\r\n\r\nfunction askForCoords() {\r\n\tnavigator.geolocation.getCurrentPosition(handleGeoSucces, handleGeoError);\r\n}\r\n\r\nfunction loadCoord() {\r\n\tconst loadedCoords = localStorage.getItem(COORDS);\r\n\tif (loadedCoords === null) {\r\n\t\taskForCoords();\r\n\t} else {\r\n\t\tconst parseCoords = JSON.parse(loadedCoords);\r\n\t\tgetWeather(parseCoords.latitude, parseCoords.longitude);\r\n\t}\r\n}\r\n\r\nfunction init() {\r\n\tloadCoord();\r\n}\r\ninit();\r\n"]}